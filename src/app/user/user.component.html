<div class="container">
	<div class="tabs">
		<div class="tab">
			<a (click)="changeTab('gegevens')" [ngClass]="{'active': tab == 'gegevens'}"><h4>Gegevens</h4></a>
		</div>
		<div class="tab">
			<a (click)="changeTab('bestellingen')" [ngClass]="{'active': tab == 'bestellingen'}"><h4>Bestellingen</h4></a>
		</div>
		<div class="tab" *ngIf="generalService.loggedInUser['role'] == 'shop'">
			<a (click)="changeTab('producten')" [ngClass]="{'active': tab == 'producten'}"><h4>Producten</h4></a>
		</div>
	</div>
	<div class="content">
		<div class="content_inner user" *ngIf="(tab == 'gegevens') && user">
			<h3>{{ name }}</h3>
			<div class="user_info"><span class="tag_email"></span><p>{{ user.email }}</p></div>
			<div class="user_info"><span class="tag_phone"></span><p>{{ user.phonenumber }}</p></div>
		</div>
		<div class="content_inner" *ngIf="(tab == 'bestellingen')">
			<div class="orders" *ngIf="orders && ( generalService.loggedInUser['role'] == 'customer' || generalService.loggedInUser['role'] == 'admin' )">
				<div class="order_detail" *ngFor="let order of orders">
					<div class="order_detail_general">
						<h3>{{ order.shop.name }}</h3>
						<p>Datum van bestelling: {{ order.created_at | date: 'd MMMM y' }}</p>
						<p *ngIf="order.period_pickup == 'am'">Ophalen in de <strong>voormiddag</strong></p>
						<p *ngIf="order.period_pickup == 'pm'">Ophalen in de <strong>namiddag</strong></p>
						<p>
							Je hebt {{ order.order_details.length }} 
							<span *ngIf="order.order_details.length > 1">producten besteld</span>
							<span *ngIf="order.order_details.length <= 1">product besteld</span>
							, met een totale prijs van {{ order.payments[0].price_total | currency:'EUR':true:'1.2-2' }}
						</p>

					</div>
					<div class="order_detail_info">
						<h4>Producten:</h4>
						<div class="order_properties" *ngFor="let details of order.order_details">
							<p class="order_properties_name">{{ details.item_name }}</p>
							<p class="order_properties_amount">{{ details.amount }}</p>
							<p class="order_properties_price">{{ details.price | currency:'EUR':true:'1.2-2' }}</p>
						</div>
					</div>
				</div>
			</div>
			<div class="orders" *ngIf="orders && generalService.loggedInUser['role'] == 'shop'">
				<div class="order_detail" *ngFor="let order of orders">
					<div class="order_detail_general">
						<h3>{{ order.name }}</h3>
						<p>Datum van ophaling: {{ order.created_at | date: 'd MMMM y' }}</p>
						<p *ngIf="order.period_pickup == 'am'">Wordt opgehaald in de <strong>voormiddag</strong></p>
						<p *ngIf="order.period_pickup == 'pm'">Wordt opgehaald in de <strong>namiddag</strong></p>
						<p>
							<span *ngIf="order.order_details.length > 1">Er werden {{ order.order_details.length }} producten besteld</span>
							<span *ngIf="order.order_details.length <= 1">Er werd {{ order.order_details.length }} product besteld</span>
							, met een totale prijs van {{ order.payments[0].price_total | currency:'EUR':true:'1.2-2' }}
						</p>
					</div>
					<div class="order_detail_info">
						<div class="order_properties" *ngFor="let details of order.order_details">
							<p class="order_properties_name">{{ details.item_name }}</p>
							<p class="order_properties_amount">{{ details.amount }}</p>
							<p class="order_properties_price">{{ details.price | currency:'EUR':true:'1.2-2' }}</p>
						</div>
					</div>
				</div>
			</div>
			<div class="content_inner user" *ngIf="(tab == 'producten')">
				<h3>Producten</h3>
				<form method="get" action="../../assets/template-producten.xlsx">
				   <button class="btn_action" type="submit">Download!</button>
				</form>
			</div>
			<div *ngIf="!orders">Je hebt nog geen bestellingen geplaatst.</div>
		</div>
	</div>
</div>
